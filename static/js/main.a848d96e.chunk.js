(this["webpackJsonparuco-scan"]=this["webpackJsonparuco-scan"]||[]).push([[0],{13:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),i=a.n(c),o=(a(13),a(1)),s=a(6),d=a(7),u=a.n(d);a(17);var l=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),a=Object(n.useRef)(null),c=Object(n.useState)(null),i=Object(o.a)(c,2),d=i[0],l=i[1],f=Object(n.useState)(!1),v=Object(o.a)(f,2),h=v[0],m=v[1],w=Object(n.useState)(null),g=Object(o.a)(w,2),b=g[0],y=g[1],E=function(e){var t={};e.forEach((function(e){t[e.id]=e}));var a=4===Object.keys(t).length;if(a){var n=t[0].corners[0].y>t[2].corners[3].y,r=Math.abs(t[1].corners[1].y-t[0].corners[0].y),c=Math.abs(t[3].corners[2].y-t[2].corners[3].y);if(n||r>25||c>25)return!1}return a},j=function(e){e&&e.getTracks().forEach((function(e){return e.stop()}))},O=function(){var e=a.current;void 0===window.navigator.mediaDevices&&(window.navigator.mediaDevices={}),void 0===window.navigator.mediaDevices.getUserMedia&&(window.navigator.mediaDevices.getUserMedia=function(e){var t=window.navigator.webkitGetUserMedia||window.navigator.mozGetUserMedia;return t?new Promise((function(a,n){t.call(window.navigator,e,a,n)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),window.navigator.mediaDevices.getUserMedia({video:!0}).then((function(t){"srcObject"in e?e.srcObject=t:e.src=window.URL.createObjectURL(t),l(t)}))};Object(n.useEffect)((function(){var e=t.current;e.width=e.offsetWidth,e.height=e.offsetHeight,O()}),[]);var M=function(){null!==b&&window.cancelAnimationFrame(b)};return Object(n.useEffect)((function(){if(d){var e=function(){if(d){var e=t.current,r=a.current;if(r&&r.readyState===r.HAVE_ENOUGH_DATA){var c=e.getContext("2d");c.drawImage(r,0,0,e.width,e.height);var i=function(){for(var e=new s.AR.Detector,a=[],n=0,r=t.current,c=r.getContext("2d"),i=0;i<=50;i+=10)a[n]=c.getImageData(0,0,r.width,r.height),n++;for(var o=0;o<a[0].data.length;o+=4){n=0;for(var d=0;d<=50;d+=10){var u=(a[n].data[o]+a[n].data[o+1]+a[n].data[o+2])/3;a[n].data[o]=u<d?0:a[n].data[o],a[n].data[o+1]=u<d?0:a[n].data[o+1],a[n].data[o+2]=u<d?0:a[n].data[o+2],n++}}n=0;for(var l=0;l<=50;l+=10){var f=e.detect(a[n]);if(n++,E(f))return f}return!1}();if(i){var o=function(e){var t={};e.forEach((function(e){t[e.id]=e}));var a=Math.min(t[0].corners[0].x,t[2].corners[3].x),n=Math.max(t[1].corners[1].x,t[3].corners[2].x),r=Math.min(t[0].corners[0].y,t[1].corners[1].y);return{x:a,y:r,width:n-a,height:Math.max(t[2].corners[3].y,t[3].corners[2].y)-r}}(i);c.drawImage(c.canvas,o.x,o.y,o.width,o.height,0,0,e.width,e.height),j(d),m(!0)}else n()}else n()}},n=function(){M(),y(window.requestAnimationFrame(e))};n()}return function(){j(d)}}),[d]),r.a.createElement("div",{className:"scan-edit",ref:e},r.a.createElement("div",{className:"scan-overlay"}),r.a.createElement("div",{className:"scan-header"},"Align a section of your Mathletics Paper with the area below"),r.a.createElement("video",{className:"hidden",autoPlay:!0,playsInline:!0,ref:a}),r.a.createElement("div",{className:"camera-area"},r.a.createElement("canvas",{className:u()({"has-capture":h}),ref:t})),h&&r.a.createElement("button",{className:"btn-retake",onClick:function(){m(!1),O()}},"Rescan work"),r.a.createElement("div",{className:"scan-footer"},r.a.createElement("button",{onClick:function(){M(),j(d)}},"Stop")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,a){e.exports=a(18)}},[[8,1,2]]]);
//# sourceMappingURL=main.a848d96e.chunk.js.map